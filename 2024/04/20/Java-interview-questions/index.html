<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="Java后端八股, 小苏的碎碎念">
    <meta name="description" content="欢迎来到我的小世界">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>Java后端八股 | 小苏的碎碎念</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 6.3.0"><link rel="stylesheet" href="/css/prism-tomorrow.css" type="text/css"></head>



   <style>
    body{
       background-image: url(https://cdn.jsdelivr.net/gh/Tokisaki-Galaxy/res/site/medias/background.jpg);
       background-repeat:no-repeat;
       background-size:cover;
       background-attachment:fixed;
    }
</style>



<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">小苏的碎碎念</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">小苏的碎碎念</div>
        <div class="logo-desc">
            
            欢迎来到我的小世界
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/17.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">Java后端八股</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/%E5%85%AB%E8%82%A1/">
                                <span class="chip bg-color">八股</span>
                            </a>
                        
                            <a href="/tags/Java/">
                                <span class="chip bg-color">Java</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/%E9%9D%A2%E8%AF%95%E5%85%AB%E8%82%A1/" class="post-category">
                                面试八股
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2024-04-20
                </div>
                

                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    8.8k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    31 分
                </div>
                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="线程池"><a href="#线程池" class="headerlink" title="线程池"></a>线程池</h1><h2 id="线程池的基本含义"><a href="#线程池的基本含义" class="headerlink" title="线程池的基本含义"></a>线程池的基本含义</h2><p>线程池其实是一种池化的技术实现，池化技术的核心思想就是实现资源的复用，避免资源的重复创建和销毁带来的性能开销。线程池可以管理一堆线程，让线程执行完任务之后不进行销毁，而是继续去处理其它线程已经提交的任务。</p>
<h2 id="线程池的七个参数是哪些？"><a href="#线程池的七个参数是哪些？" class="headerlink" title="线程池的七个参数是哪些？"></a>线程池的七个参数是哪些？</h2><ul>
<li><code>corePoolSize</code>：线程池中用来工作的核心线程数量。</li>
<li><code>maximumPoolSize</code>：最大线程数，线程池允许创建的最大线程数。</li>
<li><code>keepAliveTime</code>：超出 corePoolSize 后创建的线程存活时间或者是所有线程最大存活时间，取决于配置。</li>
<li><code>unit</code>：keepAliveTime 的时间单位。</li>
<li><code>workQueue</code>：任务队列，是一个阻塞队列，当线程数达到核心线程数后，会将任务存储在阻塞队列中。</li>
<li><code>threadFactory</code> ：线程池内部创建线程所用的工厂。</li>
<li><code>handler</code>：拒绝策略；当队列已满并且线程数量达到最大线程数量时，会调用该方法处理任务。</li>
</ul>
<h2 id="线程池的执行流程"><a href="#线程池的执行流程" class="headerlink" title="线程池的执行流程"></a>线程池的执行流程</h2><p><img src="/2024/04/20/Java-interview-questions/%E7%BA%BF%E7%A8%8B%E6%B1%A0%E6%89%A7%E8%A1%8C%E6%B5%81%E7%A8%8B.png" alt="线程池执行流程"></p>
<p>刚创建出来的线程池中只有一个构造时传入的阻塞队列，里面并没有线程，如果想要在执行之前创建好核心线程数，可以调用 <code>prestartAllCoreThreads</code> 方法来实现，默认是没有线程的。</p>
<p>当有线程通过 <code>execute</code> 方法提交了一个任务：</p>
<p>首先会去判断当前线程池的线程数是否小于核心线程数，也就是线程池构造时传入的参数 <code>corePoolSize</code>。如果小于，那么就直接通过 <code>ThreadFactory</code> 创建一个线程来执行这个任务。当任务执行完之后，<strong>线程不会退出，而是会去阻塞队列中获取任务</strong>。</p>
<blockquote>
<p>【注意】</p>
<p>提交任务的时候，就算有线程池里的线程从阻塞队列中获取不到任务，也就是，如果线程池里的线程数还是小于核心线程数，那么依然<strong>会继续创建线程，而不是复用已有的线程</strong>。也就是在达到<code>corePoolSize</code>之前，只要提交任务，就创建新的</p>
</blockquote>
<p>如果线程池里的线程数不再小于核心线程数。那么此时就会尝试将任务放入阻塞队列中</p>
<p>随着任务越来越多，队列已经满了？</p>
<p>此时会判断当前线程池里的线程数是否小于最大线程数，也就是入参时的 <code>maximumPoolSize</code> 参数。如果小于最大线程数，那么也会创建非核心线程来执行提交的任务。所以，就算队列中有任务，新创建的线程还是会优先处理这个提交的任务，而不是从队列中获取已有的任务执行，<strong>从这可以看出，先提交的任务不一定先执行</strong>。</p>
<p>假如线程数已经达到最大线程数量，会进入拒绝策略</p>
<h2 id="线程池的拒绝策略有哪些？"><a href="#线程池的拒绝策略有哪些？" class="headerlink" title="线程池的拒绝策略有哪些？"></a>线程池的拒绝策略有哪些？</h2><p>构造线程池的时候，传入的 <code>RejectedExecutionHandler</code> 对象，来处理这个任务。</p>
<p>JDK 自带的 <code>RejectedExecutionHandler</code> 实现有 4 种：</p>
<ul>
<li><code>AbortPolicy</code>：丢弃任务，抛出运行时异常【创建时默认该种】</li>
<li><code>CallerRunsPolicy</code>：由提交任务的线程来执行任务</li>
<li><code>DiscardPolicy</code>：丢弃这个任务，但是不抛异常</li>
<li><code>DiscardOldestPolicy</code>：从队列中剔除最先进入队列的任务，然后再次提交任务</li>
</ul>
<p>也可以自己实现 <code>RejectedExecutionHandler</code> 接口，比如将任务存在数据库或者缓存中。</p>
<h2 id="线程池的五种状态？"><a href="#线程池的五种状态？" class="headerlink" title="线程池的五种状态？"></a>线程池的五种状态？</h2><ul>
<li><code>RUNNING</code>：线程池创建时就是这个状态，能够接收新任务，以及对已添加的任务进行处理。</li>
<li><code>SHUTDOWN</code>：调用 shutdown 方法，线程池就会转换成 SHUTDOWN 状态，此时线程池不再接收新任务，但能继续处理已添加的任务到队列中。</li>
<li><code>STOP</code>：调用 <code>shutdownNow </code>方法，线程池就会转换成 STOP 状态，不接收新任务，也不能继续处理已添加的任务到队列中任务，并且会尝试中断正在处理的任务的线程。</li>
<li><code>TIDYING</code>：<code>[ˈtaidiŋ]</code> SHUTDOWN 状态下，任务数为 0， 其他所有任务已终止，线程池会变为 TIDYING 状态；线程池在 SHUTDOWN 状态，任务队列为空且执行中任务为空，线程池会变为 TIDYING 状态；线程池在 STOP 状态，线程池中执行中任务为空时，线程池会变为 TIDYING 状态。</li>
<li><code>TERMINATED</code>：线程池彻底终止。线程池在 TIDYING 状态执行完 terminated() 方法就会转变为 TERMINATED 状态。</li>
</ul>
<h1 id="JVM"><a href="#JVM" class="headerlink" title="JVM"></a>JVM</h1><h2 id="JVM内存模型"><a href="#JVM内存模型" class="headerlink" title="JVM内存模型"></a>JVM内存模型</h2><p>线程私有的运行时数据区: 程序计数器、Java 虚拟机栈、本地方法栈。</p>
<p>线程共享的运行时数据区：Java 堆、方法区。</p>
<ul>
<li>程序计数器 表示当前线程所执行的字节码的行号指示器</li>
<li>虚拟机栈 <ul>
<li>线程创建时就会分配一个栈空间，线程结束后栈空间被回收</li>
<li>每个方法在执行时都会创建一个栈帧存储方法的局部变量表、操作栈、动态链接和返回地址等信息</li>
</ul>
</li>
<li>本地方法栈<ul>
<li>与虚拟机栈作用相似，不同的是前者为虚拟机执行 Java 方法服务，本地方法栈为本地方法服务</li>
<li>虚拟机栈看作普通的java函数对应的内存模型，本地方法栈看作由native关键词修饰的函数对应的内存模型</li>
<li>native方法：简单地讲，一个<code>Native Method</code>就是一个java调用非java代码的接口。是一个原生态方法，方法对应的实现不是在当前文件，而是在用其他语言（如C和C++）实现的文件中</li>
</ul>
</li>
<li>堆<ul>
<li>主要作用是存放对象实例</li>
<li>垃圾回收主要就是针对堆这一区域进行</li>
<li>通过<code> -Xms</code> 和 <code>-Xmx</code> 设置堆的最小和最大容量</li>
</ul>
</li>
<li>方法区<ul>
<li>用于存储被虚拟机加载的类信息、常量、静态变量等数据</li>
</ul>
</li>
</ul>
<p>运行时常量池</p>
<p>存放常量池表，用于存放编译器生成的各种字面量与符号引用。除此之外，也会存放字符串基本类型。JDK8之前，放在方法区，大小受限于方法区。JDK8将运行时常量池存放堆中。</p>
<h2 id="介绍一下垃圾回收算法"><a href="#介绍一下垃圾回收算法" class="headerlink" title="介绍一下垃圾回收算法"></a>介绍一下垃圾回收算法</h2><p>标记清除算法：先标记需清除的对象，之后统一回收。这种方法效率不高，会产生大量不连续的碎片。</p>
<p><img src="/2024/04/20/Java-interview-questions/%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4.png" alt="标记清除"></p>
<p>标记整理算法：先标记存活对象，然后让所有存活对象<strong>向一端移动</strong>，之后清理端边界以外的内存</p>
<p><img src="/2024/04/20/Java-interview-questions/%E6%A0%87%E8%AE%B0%E6%95%B4%E7%90%86.png" alt="标记整理"></p>
<p>标记复制算法：将可用内存按容量划分为大小相等的两块，每次只使用其中一块。当使用的这块空间用完了，就将存活对象复制到另一块，再把已使用过的内存空间一次清理掉。</p>
<p><img src="/2024/04/20/Java-interview-questions/%E6%A0%87%E8%AE%B0%E5%A4%8D%E5%88%B6.png" alt="标记复制"></p>
<p>分代收集算法：融合上述 3 种基础的算法思想，而产生的针对不同情况所采用不同算法的一套组合拳。新生代中，每次垃圾收集时都发现有大批对象死去，只有少量存活，那就选用复制算法，只需要付出少量存活对象的复制成本就可以完成收集。老年代中因为对象存活率高、没有额外空间对它进行分配担保，就必须使用标记清理或者<strong>标记整理</strong>算法来进行回收。</p>
<p><img src="/2024/04/20/Java-interview-questions/%E6%96%B0%E7%94%9F%E4%BB%A3%E8%80%81%E5%B9%B4%E4%BB%A3.png" alt="新生代老年代"></p>
<h2 id="新生代与老年代"><a href="#新生代与老年代" class="headerlink" title="新生代与老年代"></a>新生代与老年代</h2><p>图片见上方</p>
<ul>
<li>Eden区<ul>
<li>将近 98% 的对象是朝生夕死。大多数情况下，对象会在新生代 Eden 区中进行分配，当 Eden 区没有足够空间进行分配时，JVM 会发起一次 <code>Minor GC</code>，<code>Minor GC</code> 相比 <code>Major GC </code>更频繁，回收速度也更快</li>
<li><code>Minor GC</code> 之后，Eden 区中绝大部分对象会被回收，而那些无需回收的存活对象，将会进到 Survivor 的 From 区，如果 From 区不够，则直接进入 To 区</li>
</ul>
</li>
<li>Survivor区<ul>
<li>相当于是 Eden 区和 Old 区的一个缓冲</li>
</ul>
</li>
<li>Old区<ul>
<li>占据着 2&#x2F;3 的堆内存空间</li>
<li>只有在 <code>Major GC</code> 的时候才会进行清理，每次 GC 都会触发<code>Stop-The-World</code>。内存越大，STW 的时间也越长，所以内存也不仅仅是越大就越好</li>
<li>标记整理</li>
<li>除了无法安置的对象会放这里。还有：大对象（这部分对象不管是不是“朝生夕死”，都会直接进到老年代。避免在前面两种区域之间发生大量复制）、长期存活对象（经历16次Minor GC的年龄15的对象）、动态对象年龄（如果 Survivor 空间中某个年龄段的对象总大小超过了 Survivor 空间的一半，那么该年龄段及以上年龄段的所有对象都会在下一次垃圾回收时被晋升到老年代，不等“成年”）</li>
</ul>
</li>
</ul>
<blockquote>
<p>为什么需要survivor区？</p>
<p>如果没有 Survivor 区，Eden 区每进行一次 Minor GC，存活的对象就会被送到老年代，老年代很快就会被填满。而有很多对象虽然一次 Minor GC 没有消灭，但其实也并不会蹦跶多久，或许第二次，第三次就需要被清除。</p>
<p>Survivor 的存在意义就是<strong>减少被送到老年代的对象，进而减少 Major GC 的发生</strong>。</p>
<p>只有经历 16 次 Minor GC 还能在新生代中存活的对象，才会被送到老年代。</p>
<p>Survivor 区为啥划分为两块？</p>
<p>解决内存碎片化。</p>
<p>假设 Survivor 只有一个区域。Minor GC 执行后，Eden 区被清空，存活的对象放到了 Survivor 区，而之前 Survivor 区中的对象，可能也有一些是需要被清除的。在这种场景下，我们只能<strong>标记清除</strong>，在新生代这种经常会消亡的区域，采用标记清除必然会让内存产生严重的碎片化。</p>
<p>因为 Survivor 有 2 个区域，所以每次 Minor GC，会将之前 Eden 区和 From 区中的存活对象复制到 To 区域。第二次 Minor GC 时，From 与 To 职责兑换，这时候会将 Eden 区和 To 区中的存活对象再复制到 From 区域，以此反复。</p>
<p>为什么不分更多块？如果 Survivor 区再细分下去，每一块的空间就会比较小，容易导致 Survivor 区满，两块是经过权衡之后的最佳方案。</p>
</blockquote>
<h2 id="介绍一下垃圾回收器"><a href="#介绍一下垃圾回收器" class="headerlink" title="介绍一下垃圾回收器"></a>介绍一下垃圾回收器</h2><p>目前来说，JVM 的垃圾收集器主要分为两大类：<strong>分代收集器</strong>和<strong>分区收集器</strong>，分代收集器的代表是 CMS，分区收集器的代表是 G1 和 ZGC</p>
<p>G1（Garbage-First Garbage Collector）在 JDK 1.7 时引入，在 JDK 9 时取代 CMS 成为了默认的垃圾收集器。G1 有五个属性：分代、增量、并行、标记整理、STW。</p>
<p>【分代】</p>
<p>G1 将堆内存分为多个大小相等的区域（Region，可以设定，不超过32M），每个区域都可以是 Eden 区、Survivor 区或者 Old 区。</p>
<p><img src="/2024/04/20/Java-interview-questions/G1.png" alt="G1"></p>
<p>G1有专门分配大对象的 Region 叫 Humongous 区，而不是让大对象直接进入老年代的 Region 中。判定规则就是一个大对象超过了一个 Region 大小的 50%，比如每个 Region 是 2M，只要一个对象超过了 1M，就会被放入 Humongous 中。</p>
<p>G1 会根据各个区域的垃圾回收情况来决定下一次垃圾回收的区域，这样就避免了对整个堆内存进行垃圾回收，从而降低了垃圾回收的时间。</p>
<p>【增量】</p>
<p>不需要一次性回收整个堆空间，而是可以逐步、增量地清理。</p>
<p>【并行】</p>
<p>可以并行回收垃圾，可以利用多个 CPU 来加速垃圾回收的速度，这在Minor GC中特别明显，因为年轻代的回收通常涉及较多的对象和较高的回收速率。</p>
<p>【标记整理】</p>
<p>在进行老年代的垃圾回收时，G1 使用标记-整理算法。这个过程分为两个阶段：标记存活的对象和整理（压缩）堆空间。</p>
<p>【STW】</p>
<p>G1 也是基于「标记-清除」算法，因此在进行垃圾回收的时候，仍然需要「Stop the World」。不过，G1 在停顿时间上添加了预测机制，用户可以指定期望停顿时间。</p>
<blockquote>
<p>G1 中存在三种 GC 模式，分别是 <code>Young GC</code>、<code>Mixed GC</code> 和 <code>Full GC</code>。</p>
<p><img src="/2024/04/20/Java-interview-questions/G1-gc.png" alt="G1-GC"></p>
<p>当 Eden 区的内存空间无法支持新对象的内存分配时，G1 会触发 <code>Young GC</code>。</p>
<p>当需要分配对象到 Humongous 区域或者堆内存的空间占比超过设置的 <code>InitiatingHeapOccupancyPercent</code> 值时，G1 会触发一次 <code>concurrent marking</code>，它的作用就是计算老年代中有多少空间需要被回收，当发现垃圾的占比达到设置的 <code>G1HeapWastePercent</code> 比例时，在下次 Young GC 后会触发一次 Mixed GC。</p>
<p>Mixed GC 是指回收年轻代的 Region 以及一部分老年代中的 Region。Mixed GC 和 Young GC 一样，采用的也是复制算法。</p>
<p>在 Mixed GC 过程中，如果发现老年代空间还是不足，此时如果浪费的堆的百分比大于 G1HeapWastePercent，则运行 Full GC。</p>
</blockquote>
<h2 id="介绍一下GC-Root"><a href="#介绍一下GC-Root" class="headerlink" title="介绍一下GC Root"></a>介绍一下GC Root</h2><p>垃圾判断算法之一的可达性分析算法使用到了GC Root</p>
<p>可达性分析算法通过 GC Roots 作为起点，然后向下搜索，搜索走过的路径被称为 <code>Reference Chain</code>（引用链），当一个对象到 GC Roots 之间没有任何引用相连时，即从 GC Roots 到该对象节点不可达，则证明该对象是需要垃圾收集的。</p>
<blockquote>
<p>成功解决了引用计数无法解决的问题-“循环依赖”，<strong>只要你无法与 GC Root 建立直接或间接的连接，系统就会判定你为可回收对象</strong>。</p>
</blockquote>
<p>在 Java 中，GC Roots 包括以下几种：</p>
<ul>
<li>虚拟机栈中的引用（方法的参数、局部变量等）</li>
<li>本地方法栈中 JNI 的引用</li>
<li>类静态变量<ul>
<li>类被卸载时，静态变量可能被垃圾回收</li>
</ul>
</li>
<li>运行时常量池中的常量（String 或 Class 类型）</li>
</ul>
<h2 id="young-gc和-full-gc-有什么区别"><a href="#young-gc和-full-gc-有什么区别" class="headerlink" title="young gc和 full gc  有什么区别"></a><strong>young gc和 full gc  有什么区别</strong></h2><p>Young GC（Minor GC）：主要针对年轻代进行垃圾回收，年轻代通常包括Eden区和两个Survivor区（S0和S1）。当Eden区满时，会触发一次Minor GC，将存活的对象复制到Survivor区中的一个，同时清空Eden区。如果Survivor区也满了，那么存活的对象会被移动到另一个Survivor区，并清空原来的Survivor区。这个过程会持续进行，直到所有存活的对象都被复制到老年代或者达到一定的阈值。</p>
<p>Full GC：主要针对整个堆内存进行垃圾回收，包括年轻代和老年代。当年轻代无法容纳更多的对象时，或者老年代空间不足时，会触发一次Full GC。在Full GC过程中，会对整个堆内存进行扫描，回收不再使用的对象。由于Full GC涉及到整个堆内存的扫描，所以它的开销比Young GC要大得多。</p>
<p>总结：</p>
<ul>
<li><p>Young GC主要针对年轻代进行垃圾回收，而Full GC则针对整个堆内存进行垃圾回收。</p>
</li>
<li><p>Young GC的频率通常比Full GC高，因为它只处理年轻代的垃圾回收。</p>
</li>
<li><p>Full GC可能会导致应用程序暂停，因为它需要对整个堆内存进行扫描和回收。</p>
</li>
</ul>
<h1 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h1><h1 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h1><h2 id="索引类型总结"><a href="#索引类型总结" class="headerlink" title="索引类型总结"></a>索引类型总结</h2><p>按照数据结构维度划分：</p>
<ul>
<li><code>BTree 索引</code>：MySQL 里默认和最常用的索引类型。只有叶子节点存储 value，非叶子节点只有指针和 key。存储引擎 MyISAM 和 InnoDB 实现 BTree 索引都是使用 B+Tree</li>
<li><code>哈希索引</code>：类似键值对的形式，一次即可定位。</li>
<li><code>RTree 索引</code>：一般不会使用，仅支持 <code>geometry</code> 数据类型，优势在于范围查找，效率较低，通常使用搜索引擎如 ElasticSearch 代替。</li>
<li><code>全文索引</code>：对文本的内容进行分词，进行搜索。目前只有 <code>CHAR</code>、<code>VARCHAR</code> ，<code>TEXT</code> 列上可以创建全文索引。<strong>一般不会使用，效率较低</strong>，通常使用搜索引擎如 ElasticSearch 代替。</li>
</ul>
<blockquote>
<p>BTree索引是一个整体的单独的名词。B-Tree和B+Tree是两种数据结构，前者是基于后者这数据结构来实现的。</p>
</blockquote>
<p>按照底层存储方式角度划分：</p>
<ul>
<li>聚簇索引（聚集索引）：索引结构和数据一起存放的索引，InnoDB 中的主键索引就属于聚簇索引。</li>
<li>非聚簇索引（非聚集索引）：索引结构和数据分开存放的索引，二级索引(辅助索引)就属于非聚簇索引。</li>
</ul>
<blockquote>
<p>MySQL 的 MyISAM 引擎，不管主键还是非主键，使用的都是非聚簇索引</p>
</blockquote>
<p>按照应用维度划分：</p>
<ul>
<li>主键索引：加速查询 + 列值唯一（不可以有 NULL）+ 表中只有一个。</li>
<li>普通索引：仅加速查询。</li>
<li>唯一索引：加速查询 + 列值唯一（可以有 NULL）。</li>
<li>覆盖索引：一个索引包含（或者说覆盖）所有需要查询的字段的值。</li>
<li>联合索引：多列值组成一个索引，专门用于组合搜索，其效率大于索引合并。</li>
<li>全文索引：对文本的内容进行分词，进行搜索。目前只有 <code>CHAR</code>、<code>VARCHAR</code> ，<code>TEXT</code> 列上可以创建全文索引。一般不会使用，效率较低，通常使用搜索引擎如 ElasticSearch 代替。</li>
</ul>
<h2 id="索引底层数据结构"><a href="#索引底层数据结构" class="headerlink" title="索引底层数据结构"></a>索引底层数据结构</h2><p>索引底层数据结构存在很多种类型，常见的索引结构有: B 树， B+树 和 Hash、红黑树。</p>
<p>在 MySQL 中，无论是 Innodb 还是 MyIsam存储引擎，都使用了<strong>B+树</strong>作为索引结构。</p>
<h2 id="BTree和B-Tree的对比"><a href="#BTree和B-Tree的对比" class="headerlink" title="BTree和B+Tree的对比"></a>BTree和B+Tree的对比</h2><p>B 树也称 B-树,全称为 <strong>多路平衡查找树</strong> ，B+ 树是 B 树的一种变体。</p>
<p>B 树&amp; B+树两者有何异同呢？</p>
<ul>
<li><p>B 树的所有节点既存放键(key) 也存放数据(data)，而 B+树只有叶子节点存放 key 和 data，其他内节点只存放 key。</p>
</li>
<li><p>B 树的叶子节点都是独立的;B+树的叶子节点有一条引用链指向与它相邻的叶子节点。</p>
</li>
<li><p>B 树的检索的过程相当于对范围内的每个节点的关键字做二分查找，可能还没有到达叶子节点，检索就结束了。而 B+树的检索效率就很<strong>稳定</strong>了，任何查找都是从根节点到叶子节点的过程，叶子节点的顺序检索很明显。</p>
</li>
<li><p>在 B 树中进行范围查询时，首先找到要查找的下限，然后<strong>对 B 树进行中序遍历，直到找到查找的上限</strong>；而 B+树的范围查询，只需要对链表进行遍历即可</p>
</li>
</ul>
<p>综上，B+树与 B 树相比，具备更少的 IO 次数、更稳定的查询效率和更适于范围查询这些优势。</p>
<blockquote>
<p>在 MySQL 中，<code>MyISAM</code> 引擎和 <code>InnoDB</code> 引擎都是使用 B+Tree 作为索引结构，但是，两者的实现方式不太一样：</p>
<ul>
<li><p>MyISAM 引擎中，B+Tree 叶节点的 data 域存放的是【数据记录的地址】。在索引检索的时候，首先按照 B+Tree 搜索算法搜索索引，如果指定的 Key 存在，则取出其 data 域的值，然后以 data 域的值为地址读取相应的数据记录。这被称为“<strong>非聚簇索引（非聚集索引）</strong>”。</p>
</li>
<li><p>InnoDB 引擎中，其数据文件本身就是索引文件。相对于 MyISAM索引文件和数据文件是分离的，InnoDB的表数据文件本身就是按 B+Tree 组织的一个索引结构，树的叶节点 data 域保存了完整的数据记录。这个索引的 key 是数据表的主键，因此 InnoDB 表数据文件本身就是主索引。这被称为“<strong>聚簇索引（聚集索引）</strong>”，而其余的索引都作为 <strong>辅助索引</strong> ，辅助索引的 data 域存储相应记录主键的值而不是地址，这也是和 MyISAM 不同的地方。在根据主索引搜索时，直接找到 key 所在的节点即可取出数据；在根据辅助索引查找时，则需要先取出主键的值，再走一遍主索引。 因此，在设计表的时候，不建议使用过长的字段作为主键，也不建议使用非单调的字段作为主键，这样会造成主索引频繁分裂。</p>
</li>
</ul>
<p>下一个问题详细阐述</p>
</blockquote>
<h2 id="聚簇索引与非聚簇索引"><a href="#聚簇索引与非聚簇索引" class="headerlink" title="聚簇索引与非聚簇索引"></a>聚簇索引与非聚簇索引</h2><p>上文已解释概念。</p>
<p>在MyISAM存储引擎中，主索引和辅助索引都是非聚簇索引。</p>
<p>在InnoDB存储引擎中，利用主键创建的索引为主索引，也是聚簇索引，在主索引之上创建的索引为辅助索引，也是非聚簇索引。<strong>一般非聚簇索引还需要回表查询。</strong></p>
<p><img src="/2024/04/20/Java-interview-questions/MyISAM%E9%9D%9E%E8%81%9A%E7%B0%87.png" alt="MyISAM非聚簇"></p>
<p><img src="/2024/04/20/Java-interview-questions/InooDB%E8%81%9A%E7%B0%87%E9%9D%9E%E8%81%9A%E7%B0%87.png" alt="InooDB聚簇非聚簇"></p>
<h2 id="为什么选择B-Tree而不是其他的？"><a href="#为什么选择B-Tree而不是其他的？" class="headerlink" title="为什么选择B+Tree而不是其他的？"></a>为什么选择B+Tree而不是其他的？</h2><p><strong>为什么不是一般二叉树？</strong></p>
<p>如果二叉树特殊化为一个链表，相当于全表扫描。【平衡】二叉树相比于二叉查找 树来说，查找效率更稳定，总体的查找速度也更快。</p>
<p><strong>为什么不是平衡二叉树呢？</strong></p>
<p>如果树这种数据结构作为索引，每查找一次数据就需要从磁盘中读取一个节点，也就是一个磁盘块，但是平衡二叉树每个节点只存储一个键值和数据。如果是 B树，可以存储更多的节点数据，树的高度也会降低，因此读取磁盘的【次数】就降下来啦，查询效率就快了。</p>
<p><strong>为什么不是 B 树而是 B+树呢？</strong></p>
<ul>
<li>B树适用于随机检索，而B+树适用于随机检索和<strong>顺序检索</strong></li>
<li>B+树的空间利用率更高，因为B树每个节点要存储键和值，而B+树的内部节点只存储键，这样B+树的一个节点就可以存储更多的索引，从而使树的高度变低，减少了I&#x2F;O次数，使得数据检索速度更快。</li>
<li>B+树索引的所有数据均存储在叶子节点，而且数据是按照顺序排列的，链表连着的。那么 B+树使得【范围查找】，【顺序查找】，排序查找，分组查找以及去重查找变得异常简单</li>
<li>B+树的<strong>性能更加稳定</strong>，因为在B+树中，每次查询都是从根节点到叶子节点</li>
</ul>
<h2 id="慢查询怎么优化？"><a href="#慢查询怎么优化？" class="headerlink" title="慢查询怎么优化？"></a>慢查询怎么优化？</h2><p>执行计划是指一条 SQL 语句在经过 MySQL 查询优化器的优化会后，具体的执行方式。</p>
<p>使用 <code>EXPLAIN</code> 命令来分析 SQL 的 <strong>执行计划</strong> ，这样就知道语句是否命中索引了</p>
<pre class=" language-mysql"><code class="language-mysql">mysql> EXPLAIN SELECT `score`,`name` FROM `cus_order` ORDER BY `score` DESC;
</code></pre>
<p>重点关注以下几个字段：</p>
<ul>
<li>type 连接类型 性能从好到坏是：<code>system &gt; const &gt; eq_ref &gt; ref &gt; ref_or_null &gt; index_merge &gt; unique_subquery &gt; index_subquery &gt; range &gt; index &gt; ALL</code> <ul>
<li>const 通过一次索引就能找到数据，一般用于主键或唯一索引作为条件，效率极高，速度非常快。</li>
<li>range：常用于范围查询，比如：between … and 或 In 等操作</li>
<li>index：全索引扫描</li>
<li>ALL：全表扫描</li>
</ul>
</li>
<li>rows 表示MySQL估算要找到我们所需的记录，需要读取的行数</li>
<li>filtered 是一个百分比的值，表里符合条件的记录数的百分比</li>
<li>extra 包含有关MySQL如何解析查询的其他信息<ul>
<li>Using filesort：一般是在指定的排序和索引排序不一致的情况才会出现。一般见于order by语句</li>
<li>Using index ：表示是否用了覆盖索引</li>
<li>Using temporary: 表示是否使用了临时表,性能特别差，需要重点优化</li>
<li></li>
</ul>
</li>
<li>key 表示<strong>实际用到的索引</strong>。配合<code>possible_keys</code>列一起看</li>
</ul>
<h2 id="建立索引的原则"><a href="#建立索引的原则" class="headerlink" title="建立索引的原则"></a>建立索引的原则</h2><ul>
<li>选择合适的字段创建索引<ul>
<li>不为<code>NULL</code>的字段：因为对于数据为 <code>NULL</code> 的字段，数据库较难优化。尽可能使用语意清晰短值替代</li>
<li>被频繁查询的字段</li>
<li>被作为条件查询的字段 如在<code>WHERE</code>中的</li>
<li>被频繁排序的字段 可以加快排序查询时间</li>
<li>被频繁用于连接的字段 可以提高多表连接查询的效率</li>
<li>被频繁更新的字段慎重建立索引  维护索引的成本大</li>
</ul>
</li>
<li>限制每张表的索引数量 建议单张表不超过5个。<ul>
<li>影响插入和更新的效率，个别时候会降低查询效率</li>
<li>太多索引可能增加MySQL优化器生成执行计划的时间</li>
</ul>
</li>
<li>尽可能考虑建立联合索引<ul>
<li>索引是需要占用磁盘空间的，可以简单理解为每个索引都对应着一颗 B+树。</li>
<li>联合索引，多个字段在一个索引上，节约磁盘空间</li>
</ul>
</li>
<li>注意避免冗余索引<ul>
<li>冗余指的是索引的功能相同，能够命中索引(a, b)就肯定能命中索引(a) ，索引(a)就是冗余索引</li>
</ul>
</li>
<li>字符串类型的字段使用前缀索引</li>
<li>避免索引失效</li>
<li>删除长期未使用的</li>
</ul>
<h2 id="索引失效的情形"><a href="#索引失效的情形" class="headerlink" title="索引失效的情形"></a>索引失效的情形</h2><ul>
<li>查询条件包含<code>or</code>，可能导致索引失效</li>
<li>如果字段类型是字符串，<code>where</code>时一定用引号括起来，否则索引失效。假设 <code>where a = &#39;1&#39;</code>会使用到索引，如果写成<code>where a = 1</code>则会导致索引失效。</li>
<li><code>like</code>通配符可能导致索引失效。这是因为索引结构通常按照有序排列来优化查找效率。当使用LIKE操作符进行模糊查询时，如果模式字符串以%开头，这意味着查询条件可以匹配任何位置的任意字符，因此数据库无法利用索引的有序性质来限制搜索范围，进而导致数据库不得不执行全表扫描来找到匹配的行。</li>
<li>联合索引，查询时的条件列不是联合索引中的第一个列，索引失效。</li>
<li>在索引列上使用 mysql 的内置函数，索引失效。</li>
<li>对索引列运算（如，<code>+、-、*、/</code>），索引失效。</li>
<li>索引字段上使用<code>（！= 或者 &lt; &gt;，not in）</code>时，可能会导致索引失效。</li>
<li>索引字段上使用<code>is null， is not null</code>，可能导致索引失效。</li>
</ul>
<h2 id="最左匹配原则"><a href="#最左匹配原则" class="headerlink" title="最左匹配原则"></a>最左匹配原则</h2><p>最左前缀匹配原则指的是在使用联合索引时，MySQL 会根据索引中的字段顺序，从左到右依次匹配查询条件中的字段。如果查询条件与索引中的最左侧字段相匹配，那么 MySQL 就会使用索引来过滤数据，这样可以提高查询效率。</p>
<p>最左匹配原则会一直向右匹配，直到遇到范围查询（如 <code>&gt;、&lt;</code>）为止。对于 <code>&gt;=、&lt;=、BETWEEN 以及前缀匹配 LIKE 的范围查询</code>，不会停止匹配</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/8qemhRg5MgXs1So5YCv0fQ">联合索引的最左匹配原则全网都在说的一个错误结论</a></p>
</blockquote>
<p>例如建立索引(a,b,c)，几种情况</p>
<p>第一种</p>
<pre class=" language-mysql"><code class="language-mysql">select * from table_name where a = 1 and b = 2 and c = 3
select * from table_name where b = 2 and a = 1 and c = 3
</code></pre>
<p>上面两次查询过程中所有值都用到了索引，where后面字段调换不会影响查询结果，因为MySQL中的优化器会<strong>自动优化</strong>查询顺序。</p>
<p>第二种</p>
<pre class=" language-mysql"><code class="language-mysql">select * from table_name where a = 1
select * from table_name where a = 1 and b = 2
select * from table_name where a = 1 and b = 2 and c = 3
</code></pre>
<p>三个查询语句都用到了索引，因为三个语句都是从最左开始匹配的。</p>
<p>第三种</p>
<pre class=" language-mysql"><code class="language-mysql">select * from table_name where b = 1
select * from table_name where b = 1 and c = 2
</code></pre>
<p>这两个查询语句<strong>都没有用到</strong>索引，因为不是从最左边开始匹配的</p>
<p>第四种</p>
<pre class=" language-mysql"><code class="language-mysql">select * from table_name where a = 1 and c = 2
</code></pre>
<p>这个查询语句只有a列用到了索引，c列没有用到索引，因为中间跳过了b列，不是从最左开始连续匹配的。</p>
<p>第五种</p>
<pre class=" language-mysql"><code class="language-mysql">select * from table_name where a = 1 and b < 3 and c < 1
</code></pre>
<p>这个查询中只有a列和b列使用到了索引，而c列没有使用索引，因为根据最左匹配查询原则，遇到<strong>范围查询会停止</strong>。</p>
<p>由于 b 列是一个范围查询，b &lt; 3 的结果集可能包含多个不同的 b 值，这些值在索引中并不是连续的。因此，索引无法继续按 c 列的顺序来查找记录。</p>
<p>第六种</p>
<pre class=" language-mysql"><code class="language-mysql">select * from table_name where a like 'ab%';
select * from table_name where a like '%ab'
select * from table_name where a like '%ab%'
</code></pre>
<p>对于列为字符串的情况，<strong>只有前缀匹配可以使用索引</strong>，中缀匹配和后缀匹配只能进行全表扫描。</p>
<h2 id="数据库的隔离级别"><a href="#数据库的隔离级别" class="headerlink" title="数据库的隔离级别"></a>数据库的隔离级别</h2><p>首先了解几个概念：</p>
<ul>
<li><p><strong>脏读</strong> 指的是读到了其他事务未提交的数据，未提交意味着这些数据可能会回滚，也就是可能最终不会存到数据库中，也就是不存在的数据。读到了并不一定最终存在的数据，这就是脏读。<br>A事务修改为10，B读到10，A回滚，B已经拿着10去执行其他的了。也就是拿的是脏数据。</p>
</li>
<li><p><strong>不可重复读</strong> 对比可重复读，不可重复读指的是在同一事务内，不同的时刻读到的同一批数据可能是不一样的，可能会受到其他事务的影响，比如其他事务改了这批数据并提交了。通常针对数据更新（UPDATE）操作。</p>
</li>
<li><p><strong>可重复读</strong> 指的是在一个事务内，最开始读到的数据和事务结束前的任意时刻读到的同一批数据都是一致的。通常针对数据更新（UPDATE）操作。</p>
</li>
<li><p><strong>幻读</strong> 是指在一个事务内，两次执行相同的查询语句，却得到了不同数量的记录。<br>具体来说，幻读发生在一个事务在读取数据时，另一个事务对数据进行了修改（如<strong>插入或删除</strong>），导致第一个事务再次读取时发现有新的、未被检索到的数据行出现。这种现象就好像是“幻觉”一样，因为新读取到的数据行在第一次查询时并不存在。在可重复读隔离级别下，由于【行锁仅加在符合条件的记录行】上，其他写事务可以【新增】符合查询条件的记录，导致读事务在不同时间点得到不一致的结果数量。例如：</p>
<ul>
<li>事务T1：开始一个事务并首次执行查询，条件为age&#x3D;10，返回5条记录。</li>
<li>事务T2：在T1未完成时，另一个事务插入了一条新记录，该记录的age值也为10，并提交了事务。</li>
<li>事务T1：在不知晓T2操作的情况下，再次执行相同条件的查询age&#x3D;10，此时返回6条记录，包括了T2刚插入的新纪录。</li>
</ul>
</li>
</ul>
<p>四种隔离级别分别是：</p>
<ol>
<li>读未提交（READ UNCOMMITTED）<br>其实就是可以读到其他事务未提交的数据，但没有办法保证你读到的数据最终一定是提交后的数据，如果中间发生回滚，那就会出现脏数据问题，读未提交没办法解决脏数据问题。更别提可重复读和幻读了，想都不要想。</li>
<li>读提交 （READ COMMITTED） RC<br>读提交就是一个事务只能读到其他事务已经提交过的数据，也就是其他事务调用 <code>commit</code> 命令之后的数据。那脏数据问题迎刃而解了。<br>但是，假如B先读一个值是9，A修改为10，B事务只能在A提交后才能读到10，A提交之前B读到的是原来的9，那么B事务期间读到的是两个值，不符合“可重复读”，这就是不可重复读。</li>
<li>可重复读 （REPEATABLE READ） RR<br>相对于不可重复读而言的。保证B前面读到的9，A提交后，B读到的还是9。但是这是对于已经有的行的update操作。如果是插入语句，又有 <code>幻读</code> 问题。</li>
<li>串行化 （SERIALIZABLE）<br>将事务的执行变为顺序执行，与其他三个隔离级别相比，它就相当于单线程，后一个事务的执行必须等待前一个事务结束。</li>
</ol>
<p>从上往下，隔离强度逐渐增强，性能逐渐变差。采用哪种隔离级别要根据系统需求权衡决定，其中，可重复读是 MySQL 的默认级别。<br>四种隔离强度下，四种情况的可能发生情况：</p>
<p><img src="/2024/04/20/Java-interview-questions/%E6%95%B0%E6%8D%AE%E5%BA%93%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB.png" alt="数据库隔离级别"></p>
<blockquote>
<p>大部分数据库系统的隔离级别都是 <strong>READ-COMMITTED</strong> ，但是你要知道的是 InnoDB 存储引擎默认使用 <strong>REPEATABLE-READ</strong>。InnoDB 实现的 REPEATABLE-READ 隔离级别其实是可以解决幻读问题</p>
</blockquote>
<h2 id="MVCC"><a href="#MVCC" class="headerlink" title="MVCC"></a>MVCC</h2><p><a target="_blank" rel="noopener" href="https://javaguide.cn/database/mysql/innodb-implementation-of-mvcc.html#rc-%E5%92%8C-rr-%E9%9A%94%E7%A6%BB%E7%BA%A7%E5%88%AB%E4%B8%8B-mvcc-%E7%9A%84%E5%B7%AE%E5%BC%82">InnoDB存储引擎对MVCC的实现 | JavaGuide</a></p>
<h2 id="ACID的实现"><a href="#ACID的实现" class="headerlink" title="ACID的实现"></a>ACID的实现</h2><p>关系型数据库事务都有ACID特性：</p>
<p><strong>原子性</strong>（<code>Atomicity</code>）：事务是最小的执行单位，不允许分割。事务的原子性确保动作要么全部完成，要么完全不起作用；</p>
<p><strong>一致性</strong>（<code>Consistency</code>）：执行事务前后，数据保持一致，例如转账业务中，无论事务是否成功，转账者和收款人的总额应该是不变的；</p>
<p><strong>隔离性</strong>（<code>Isolation</code>）：并发访问数据库时，一个用户的事务不被其他事务所干扰，各并发事务之间数据库是独立的；</p>
<p><strong>持久性</strong>（<code>Durability</code>）：一个事务被提交之后。它对数据库中数据的改变是持久的，即使数据库发生故障也不应该对其有任何影响。</p>
<blockquote>
<p><strong>只有保证了事务的持久性、原子性、隔离性之后，一致性才能得到保障。也就是说 A、I、D 是手段，C 是目的！</strong></p>
</blockquote>
<p>原子性的实现</p>
<p>回滚日志</p>
<p>想要保证事务的原子性，就需要在异常发生时，对已经执行的操作进行<strong>回滚</strong>，而在 MySQL 中，恢复机制是通过<strong>回滚日志</strong>（undo log）实现的，所有事务进行的修改都会先记录到这个回滚日志中，然后在对数据库中的对应行进行写入。</p>
<p>在整个系统发生崩溃、数据库进程直接被杀死后，当用户再次启动数据库进程时，还能够立刻通过查询回滚日志将之前未完成的事务进行回滚，这也就需要回滚日志必须<strong>先于</strong>数据持久化到磁盘上，是我们需要先写日志后写数据库的主要原因。</p>
<p>隔离性的实现</p>
<p>持久性的实现</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">SuQingdong</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="https://crystal1999.github.io/2024/04/20/Java-interview-questions/">https://crystal1999.github.io/2024/04/20/Java-interview-questions/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">SuQingdong</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/%E5%85%AB%E8%82%A1/">
                                    <span class="chip bg-color">八股</span>
                                </a>
                            
                                <a href="/tags/Java/">
                                    <span class="chip bg-color">Java</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/myalipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/myWechat.jpg" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;上一篇</div>
            <div class="card">
                <a href="/2024/07/05/Git/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/10.jpg" class="responsive-img" alt="Git">
                        
                        <span class="card-title">Git</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Git
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2024-07-05
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-category">
                                    学习笔记
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Git/">
                        <span class="chip bg-color">Git</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2024/01/09/Pandas/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/23.jpg" class="responsive-img" alt="Pandas">
                        
                        <span class="card-title">Pandas</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            Pandas的基本概念、基本操作、绘图简介、API介绍等。
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2024-01-09
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" class="post-category">
                                    学习笔记
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/Pandas/">
                        <span class="chip bg-color">Pandas</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>


<script>
    $('#articleContent').on('copy', function (e) {
        // IE8 or earlier browser is 'undefined'
        if (typeof window.getSelection === 'undefined') return;

        var selection = window.getSelection();
        // if the selection is short let's not annoy our users.
        if (('' + selection).length < Number.parseInt('50')) {
            return;
        }

        // create a div outside of the visible area and fill it with the selected text.
        var bodyElement = document.getElementsByTagName('body')[0];
        var newdiv = document.createElement('div');
        newdiv.style.position = 'absolute';
        newdiv.style.left = '-99999px';
        bodyElement.appendChild(newdiv);
        newdiv.appendChild(selection.getRangeAt(0).cloneContents());

        // we need a <pre> tag workaround.
        // otherwise the text inside "pre" loses all the line breaks!
        if (selection.getRangeAt(0).commonAncestorContainer.nodeName === 'PRE') {
            newdiv.innerHTML = "<pre>" + newdiv.innerHTML + "</pre>";
        }

        var url = document.location.href;
        newdiv.innerHTML += '<br />'
            + '来源: 小苏的碎碎念<br />'
            + '文章作者: SuQingdong<br />'
            + '文章链接: <a href="' + url + '">' + url + '</a><br />'
            + '本文章著作权归作者所有，任何形式的转载都请注明出处。';

        selection.selectAllChildren(newdiv);
        window.setTimeout(function () {bodyElement.removeChild(newdiv);}, 200);
    });
</script>


<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;目录</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('1'),
            headingSelector: 'h1, h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h1, h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2025</span>
            
            <span id="year">2019</span>
            <a href="/about" target="_blank">SuQingdong</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">


    <a href="mailto:1561823697@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=1561823697" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 1561823697" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
